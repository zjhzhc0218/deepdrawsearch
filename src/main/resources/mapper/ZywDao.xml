<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC
        "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.deepdraw.deepsearch.dao.ZywDao">


    <select id="selectZyw" resultType="com.deepdraw.deepsearch.entity.Zyw">
        SELECT  id,name,password,lastTime,lastIp,permission,ban
        FROM zyw_user
    </select>

    <select id="selectZywForname" resultType="com.deepdraw.deepsearch.entity.Zyw">
        SELECT  id,name,password,lastTime,lastIp,permission,ban
        FROM zyw_user
        WHERE name = #{name}
        AND password = #{password}
    </select>

    <insert id="addZyw" parameterType="com.deepdraw.deepsearch.entity.Zyw"
                      useGeneratedKeys="true" keyProperty="id">
    INSERT INTO zyw_user(
    name,
    password,
    lastTime,
    lastIp
    )VALUE (
    #{name},
    #{password},
    now(),
    #{lastIp}
    )
</insert>


    <update id="updateZyw" parameterType="com.deepdraw.deepsearch.entity.Zyw">
        UPDATE zyw_user SET
            password =  #{password},
            lastTime =  now(),
            lastIp = #{lastIp},
            permission = #{permission},
            ban = #{ban}
        WHERE id = #{id}
        AND name =  #{name}
    </update>

</mapper>